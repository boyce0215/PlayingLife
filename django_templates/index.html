<!DOCTYPE html>
<html lang="zh-hant-tw"></html>
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
  <title>PlayingLife</title>

  {% load static %}
  <link rel="stylesheet" href="{% static 'css/normalize.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/style.css' %}"/>
  <script defer="defer" src="https://use.fontawesome.com/releases/v5.0.1/js/all.js"></script>
</head>
<body>
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header"><a class="navbar-brand"><strong>PlayingLife</strong></a></div>
      {% if not user.is_authenticated %}
      <div id="visitors">
        <div class="nav navbar-nav navbar-right">
          <button class="btn btn-default navbar-btn btn-custom" type="button" data-target="#login" data-toggle="modal">登入</button>
          <button class="btn btn-default navbar-btn btn-custom" type="button" data-target="#register" data-toggle="modal">註冊</button>
        </div>
      </div>
      {% else %}
      <div id="member">
        <div class="nav navbar-nav">
          <div class="navbar-text"><span>連續獲勝</span><span class="count">0</span><span>次</span></div>
        </div>
        <div class="nav navbar-nav navbar-right">
          <button class="btn btn-default navbar-btn btn-custom" id="logout-button" type="button">登出</button>
        </div>
      </div>
      {% endif %}
    </div>
  </nav>
  <header id="banner">
    <div class="container text-center">
      <h1 class="heading">讓我們成為你生活中的小確幸</h1><br/>
      <p class="text">現在開始每天進來玩預測遊戲<br>連續猜對 5 次 直接送你大杯星巴克</p><a class="btn btn-default btn-custom" href="#play">馬上玩遊戲</a>
    </div>
  </header>
  <section id="play">
    <div class="container text-center">
      <h2 class="heading">玩預測請你喝星巴克，就是這麼簡單</h2>
      <hr/>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3 content">
          <h3 class="title">{{ current_betting.question }}</h3>
          <p class="text">台灣指數不斷創新高，行情還能維持多久？</p>
          <div class="view"></div>
          {% if not is_joined %}
            {% if user.is_authenticated %}
            <button class="btn btn-default btn-custom answer-option" type="button" data-target="#alert" data-toggle="modal" value="option_first">{{ current_betting.option_first }}</button>
            <button class="btn btn-default btn-custom answer-option" type="button" data-target="#alert" data-toggle="modal" value="option_second">{{ current_betting.option_second }}</button>
            {% else %}
            <button class="btn btn-default btn-custom answer-option" type="button" data-target="#login" data-toggle="modal" value="option_first">{{ current_betting.option_first }}</button>
            <button class="btn btn-default btn-custom answer-option" type="button" data-target="#login" data-toggle="modal" value="option_second">{{ current_betting.option_second }}</button>
            {% endif %}
          {% else %}
            <button class="btn btn-default btn-answer" type="button" data-target="#alert" data-toggle="modal">已選 <span id="select-answer">{{selected_answer}}</span></button>
          {% endif %}
        </div>
      </div>
    </div>
  </section>
  <div class="modal fade work-detail" id="login" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">登入</h4><a herf="#">還沒有帳號？前往註冊 ></a>
        </div>
        <div class="modal-body">
          <form id="login-form" method="post">
            {% csrf_token %}
            <div class="input-group"><span class="input-group-addon"><i class="fas fa-envelope"></i></span>
              {{ login_form.input_email }}
            </div>
            <div class="input-group"><span class="input-group-addon"><i class="fas fa-lock"></i></span>
              {{ login_form.input_password }}
            </div><a herf="#">忘記密碼?</a>
            <button class="btn btn-primary btn-block" type="submit" name="login_home" value="Login_Home">登入</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade work-detail" id="register" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">註冊</h4><a herf="#">已經有帳號？登入 ></a>
        </div>
        <div class="modal-body">
          <form id="register-form" data-toggle="validator" role="form" method="post">
            {% csrf_token %}
            <div class="form-group">
              <div class="input-group"><span class="input-group-addon"><i class="fas fa-envelope"></i></span>
                {{ register_form.email }}
              </div>
              <span class="help-block with-errors"></span>
            </div>
            <div class="form-group">
              <div class="input-group"><span class="input-group-addon"><i class="fas fa-lock"></i></span>
                {{ register_form.password1 }}
              </div>
              <span class="help-block with-errors"></span>
            </div>
            <div class="form-group">
              <div class="input-group"><span class="input-group-addon"><i class="fas fa-lock"></i></span>
                {{ register_form.password2 }}
              </div>
              <span class="help-block with-errors"></span>
            </div>
            <button class="btn btn-primary btn-block" type="submit" name="register_home" value="Register_Home">註冊</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade work-detail" id="alert" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-body text-center">
          <form id="play-form" method="post">
            {% csrf_token %}
            <h3 class="title">{{ current_betting.question }}</h3>
            <p class="text">台灣指數不斷創新高，行情還能維持多久？</p>
            <p class="text">你選擇了<span id="option-answer"></span></p>
            <button class="btn btn-default btn-custom answer-select" type="cancel">後悔了</button>
            <button class="btn btn-default btn-custom answer-select" type="submit">不後悔</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <footer>
    <div class="container">
      <p>Copyright © 2017 tset. All Rights Reserved.</p>
    </div>
  </footer>
</body>

{# temporarily for debugging #}
{% if user.is_authenticated %}
  <p>Welcome {{ user.email }} !!!</p>
{% endif %}
<script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/index.js' %}"></script>
<script src="{% static 'js/validator.min.js' %}"></script>
